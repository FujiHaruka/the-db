<!-- // Code generated by coz. DO NOT EDIT. -->
# the-db@9.3.35

DB for the-framework

+ Functions
  + [create(args)](#the-db-function-create)
+ [`TheDB`](#the-db-classes) Class
  + [new TheDB(config)](#the-db-classes-the-d-b-constructor)
  + [b.hooksFromMapping(HookMapping)](#the-db-classes-the-d-b-hooksFromMapping)
  + [b.load(ResourceClass, resourceName)](#the-db-classes-the-d-b-load)
  + [b.loadFromMapping(ResourceMapping)](#the-db-classes-the-d-b-loadFromMapping)
  + [b.pluginFromMapping(PluginMapping)](#the-db-classes-the-d-b-pluginFromMapping)
  + [b.unref()](#the-db-classes-the-d-b-unref)
  + [b.drop()](#the-db-classes-the-d-b-drop)
  + [b.invalidate(entityRef)](#the-db-classes-the-d-b-invalidate)
  + [b.updateVersion(version)](#the-db-classes-the-d-b-updateVersion)
  + [b.assertResource(resourceName)](#the-db-classes-the-d-b-assertResource)
  + [b.getResource(resourceName)](#the-db-classes-the-d-b-getResource)
  + [b.hasResource(resourceName)](#the-db-classes-the-d-b-hasResource)
  + [b.migrate(handlers)](#the-db-classes-the-d-b-migrate)
  + [b.requestToRefresh(entityRef)](#the-db-classes-the-d-b-requestToRefresh)
  + [b.startRefreshLoop(interval)](#the-db-classes-the-d-b-startRefreshLoop)
  + [b.stopRefreshLoop()](#the-db-classes-the-d-b-stopRefreshLoop)
  + [b.waitToRefresh(entityRef, options)](#the-db-classes-the-d-b-waitToRefresh)

## Functions

<a class='md-heading-link' name="the-db-function-create" ></a>

### create(args) -> `TheDB`

Create a TheDB instance

| Param | Type | Description |
| ----- | --- | -------- |
| args | * |  |



<a class='md-heading-link' name="the-db-classes"></a>

## `TheDB` Class



**Extends**: 

+ `ResourceMixed`


+ `ExportImportMixed`


+ `MigrateMixed`


+ `RefreshMixed`


+ `CliMixed`



<a class='md-heading-link' name="the-db-classes-the-d-b-constructor" ></a>

### new TheDB(config)

Constructor of TheDB class

| Param | Type | Description |
| ----- | --- | -------- |
| config | Object |  |
| config.name | string | Name of clay-lump |
| config.dialect | string | Database dialect. "mysql", "json", "memory", "localstorage", or "sqlite" |
| config.storage | string | Storage file name for "sqlite" or "json" dialect |
| config.database | string | Name of database schema |
| config.username | string | Database username |
| config.password | string | Database password |
| config.host | string | Database password |
| config.port | string | Database password |
| config.plugins | object | Database plugin creators |
| config.hooks | object | Database hook creators |
| config.resources | object | Database resource classes |


<a class='md-heading-link' name="the-db-classes-the-d-b-hooksFromMapping" ></a>

### b.hooksFromMapping(HookMapping)

Register hooks from mapping

| Param | Type | Description |
| ----- | --- | -------- |
| HookMapping | Object |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-load" ></a>

### b.load(ResourceClass, resourceName) -> `ClayResource`

Register resource form Resource Class

| Param | Type | Description |
| ----- | --- | -------- |
| ResourceClass | function | Resource class to register |
| resourceName | string | Name of resource |


<a class='md-heading-link' name="the-db-classes-the-d-b-loadFromMapping" ></a>

### b.loadFromMapping(ResourceMapping)

Load resources from mapping object

| Param | Type | Description |
| ----- | --- | -------- |
| ResourceMapping | Object.&lt;string, function()&gt; | Resource name and class |


<a class='md-heading-link' name="the-db-classes-the-d-b-pluginFromMapping" ></a>

### b.pluginFromMapping(PluginMapping)

Register plugins from mapping

| Param | Type | Description |
| ----- | --- | -------- |
| PluginMapping | Object |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-unref" ></a>

### b.unref() -> `TheDB`

Aut close before exit

<a class='md-heading-link' name="the-db-classes-the-d-b-drop" ></a>

### b.drop() -> `Promise.<void>`

Drop database

<a class='md-heading-link' name="the-db-classes-the-d-b-invalidate" ></a>

### b.invalidate(entityRef) -> `Promise.<void>`

Invalidate entity

| Param | Type | Description |
| ----- | --- | -------- |
| entityRef | string |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-updateVersion" ></a>

### b.updateVersion(version) -> `Promise.boolean`

Update database migration version

| Param | Type | Description |
| ----- | --- | -------- |
| version | string | Version string |


<a class='md-heading-link' name="the-db-classes-the-d-b-assertResource" ></a>

### b.assertResource(resourceName)

Check if resource exists

| Param | Type | Description |
| ----- | --- | -------- |
| resourceName | string |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-getResource" ></a>

### b.getResource(resourceName) -> `TheResource`

Get resource with name

| Param | Type | Description |
| ----- | --- | -------- |
| resourceName | string |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-hasResource" ></a>

### b.hasResource(resourceName) -> `boolean`

Check if resource exists

| Param | Type | Description |
| ----- | --- | -------- |
| resourceName | string |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-migrate" ></a>

### b.migrate(handlers) -> `Promise.<?Object>`

Run database migration

| Param | Type | Description |
| ----- | --- | -------- |
| handlers | Object.&lt;string, function()&gt; | Migration handler for each versions |


<a class='md-heading-link' name="the-db-classes-the-d-b-requestToRefresh" ></a>

### b.requestToRefresh(entityRef)

Request to refresh entity

| Param | Type | Description |
| ----- | --- | -------- |
| entityRef | string |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-startRefreshLoop" ></a>

### b.startRefreshLoop(interval)

Start refreshing loop

| Param | Type | Description |
| ----- | --- | -------- |
| interval | number |  |


<a class='md-heading-link' name="the-db-classes-the-d-b-stopRefreshLoop" ></a>

### b.stopRefreshLoop()

Stop refreshing loop

<a class='md-heading-link' name="the-db-classes-the-d-b-waitToRefresh" ></a>

### b.waitToRefresh(entityRef, options) -> `Promise.<Boolean>`

Wait until refresh

| Param | Type | Description |
| ----- | --- | -------- |
| entityRef | string |  |
| options | Object | Optional settings |




